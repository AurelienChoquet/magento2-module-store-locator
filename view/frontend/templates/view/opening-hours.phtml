<?php
/**
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade this module to newer
 * versions in the future.
 *
 * @category  Smile
 * @package   Smile\StoreLocator
 * @author    Romain Ruaud <romain.ruaud@smile.fr>
 * @copyright 2017 Smile
 * @license   Open Software License ("OSL") v. 3.0
 *
 * Retailer opening hours frontend view block
 */
?>
<div class="opening-hours-info" data-block="opening-hours-info">
    <div class="box-title">
        <p><?php echo __('Opening Hours'); ?> :</p>
        <div class="opening-hours showopeninghours" data-bind="scope: 'smile-storelocator-opening-hours'">
            <a href="#" onClick="return false;" data-bind="text: getLinkLabel(), css: { isOpen: isOpenNow() == true, isClosed: isOpenNow() == false }" class="opening-hours-label"></a>
        </div>
    </div>
    <div class="block catalog-product-stores-availability-content"
         data-role="dropdownDialog"
         data-bind="scope: 'smile-storelocator-opening-hours'"
         data-mage-init='{
           "dropdownDialog":{
             "appendTo":"[data-block=opening-hours-info]",
             "triggerTarget":".showopeninghours",
             "timeout": "2000",
             "closeOnMouseLeave": false,
             "closeOnClickOutside": false,
             "closeOnEscape": false,
             "triggerClass":"active",
             "parentClass":"active",
             "buttons":[]
           }
         }'>
        <div class="opening-hours">
            <table class="opening-hours-table">
                <tbody data-bind="foreach: openingHoursList()">
                    <tr data-bind="css: { currentDay: $parent.isCurrentDay(day) == true }">
                        <td class="opening-row" data-bind="text:day"></td>
                        <td class="opening-row" data-bind="text:hours"></td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>

<div class="opening-hours-info" data-bind="scope: 'smile-storelocator-opening-hours'">
    <div class="box-title" data-bind="visible:hasSpecialOpeningHours()">
        <p><?php /* @escapeNotVerified */ echo __('Special Opening Hours'); ?> :</p>
    </div>
    <div class="opening-hours" data-bind="visible:hasSpecialOpeningHours()">
        <table class="opening-hours-table">
            <tbody data-bind="foreach: specialOpeningHoursList()">
                <tr>
                    <td class="opening-row" data-bind="text:day"></td>
                    <td class="opening-row" data-bind="text:hours"></td>
                </tr>
            </tbody>
        </table>
    </div>
</div>
<script type="text/x-magento-init">
    {"*" : {"Magento_Ui/js/core/app": <?php echo $block->getJsLayout(); ?> }}
</script>
